<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Common Forms for Complex Data • silicate</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">silicate</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="/index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/translator.html">Format translator</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->

<div id="silicate" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#silicate" class="anchor"></a>silicate</h1></div>
<p>The goal of silicate is to provide a general common form for complex multi-dimensional data.</p>
<p>The need for this for spatial data is illustrated here:</p>
<p><a href="http://rpubs.com/cyclemumner/305595" class="uri">http://rpubs.com/cyclemumner/305595</a></p>
<div id="note-september-2017" class="section level2">
<h2 class="hasAnchor">
<a href="#note-september-2017" class="anchor"></a>NOTE September 2017</h2>
<p>I’ve recently figured out some things that will make the idea of a “universal converter” more realistic. In silicate I hit upon the central PATH and PRIMITIVE models, these are dual-views of the two main types of structures used in complex data - paths are the turtle-head-down coordinate lists used by lines, polygons, polypath - primitives are the edge-lists or triangle-lists or quad-lists used in rgl and in many topological structures (the key thing that makes them topological is unique-vertex-pool, indexed by other types). Paths can be partly topological in that a unique vertex pool is indexed by variable-length paths, and this is a key distinction from primitives which have a constant number of indexed vertices per element. There’s a clash here, because most efficient for paths is very different from most efficient for primitives. <code>silicate</code> introduced an intermediate form for paths, all instances of all coordinates in one table, and another “path” table that records how many of the coordinates (in native order) are used per path. So this is a kind of rle structure, it provides a common model that can be used by any path-based structure for a decomposition or re-composition form. I initially applied this to sf, spatstat, rgl, some track-based structures, and a bit of ggplot2 exploration - but was kind of stuck with pretty slow sf decomposition. I’ve now seen how to do that fast enough, so we can now target this common form and from that generate real topology, with edge-lists or full-on triangles from polygons, or quads from rasters to stream to structures in WebGL (for example), and back.</p>
<p>Key examples</p>
<p>the key ones are OSM-like data with names, LiDAR data (xyz multipoints with time, colour, intensity, groupings, etc. - with groupings such as “contiguous surface” - lidR is good for this), animal track data - grouped-multilines with time, depth, temperature etc. on the coordinates, and triangulations - again grouped-structures from rgl</p>
</div>
</div>
<div id="developer-notes-" class="section level1">
<h1 class="hasAnchor">
<a href="#developer-notes-" class="anchor"></a>Developer notes.</h1>
<p>There are key worker functions <code>sc_coord</code>, <code>sc_node</code>, <code>sc_object</code>, <code>sc_path</code>.</p>
<ul>
<li>sc_coord returns the table of coordinates completely flattened, no normalization</li>
<li>sc_object returns the highest level feature metadata</li>
<li>sc_path returns the table of individual paths, with a coordinate count</li>
</ul>
<p>This generic set of workers is chosen because we often want the complete set of vertices in their pure form. Returning them with no grouping or identifiers and without any de-duplication means we have a representation of the pure geometry. Since the table has no other columns, generic code can be sure that all columns contain a coordinate. That means we don’t need specialist code for ‘XYZ’, ‘XYZM’, ‘XYT’, ‘TYX’ and so on.</p>
<p>The table of individual paths records which object it belongs to, how many coordinates there are and an ID for the path. This is not intended to be ‘relational’, it’s an intermediate form link by pure indexing. Inserting more levels between the paths and the highest objects is possible, but unclear exactly how to do this yet.</p>
<p>The <code>unjoin</code> concept is key for mapping the key between unique vertices and a path’s instance of those as coordinates, in the right order. We can use the unjoin engine to add structure to other more generic data streams, like GPS, animal tracking, and general sensors.</p>
<p>The model functions <code>PRIMITIVE</code> and <code>PATH</code> should work in the following cases.</p>
<ul>
<li>to flip from one to another <code>PRIMITIVE(PATH(PRIMITIVE(x)))</code> should work for any kind of ‘x’ model</li>
<li>for any <code>sf</code> object</li>
<li>convert to igraph objects WIP: <a href="https://github.com/mdsumner/scgraph" class="uri">https://github.com/mdsumner/scgraph</a>
</li>
<li>spatstat objects WIP: <a href="https://github.com/mdsumner/scspatstat" class="uri">https://github.com/mdsumner/scspatstat</a>
</li>
<li>…</li>
</ul>
<p>The classes for all variants of simple features are not worked out, for instance a MULTIPOINT can end up with a degenerate (and expensive) segment table.</p>
<p>More functions <code>sc_uid</code> provides unique IDs, and <code>sc_node</code> is a worker for a arc-node intermediate model.</p>
<p>Intermediate models</p>
<ul>
<li>Arc-node (WIP)</li>
<li>Monotone polygons (future work)</li>
</ul>
<div id="design" class="section level2">
<h2 class="hasAnchor">
<a href="#design" class="anchor"></a>Design</h2>
<p>There is a hierarchy of sorts with layer, object, path, primitives, coordinates, and vertices.</p>
<p>The current design uses capitalized function names <code>PATH</code>, <code>PRIMITIVE</code> … that act on layers, while prefixed lower-case function names produce or derive the named entity at a given level for a given input. E.g. <code>sc_path</code> will decompose all the geometries in an <code>sf</code> layer to the PATH model and return them in generic form. <code>PATH</code> will decompose the layer as a whole, including the component geometries.</p>
<p><code>PATH()</code> is the main model used to decompose inputs, as it is the a more general form of the GIS idioms (simple features and georeferenced raster data) This treats connected <em>paths</em> as fully-fledged entities like vertices and objects are, creating a relational model that stores all <em>vertices</em> in one table, all <em>paths</em> in another, and and all highest-level <em>objects</em> in another. The PATH model also takes the extra step of <em>normalizing</em> vertices, finding duplicates in a given geometric space and creating an intermediate link table to record all <em>instances of the vertices</em>. The PATH model does not currently normalize paths, but this is something that could be done, and is close to what arc-node topology is.</p>
<p>The <code>PRIMITIVE</code> function decomposes a layer into actual primitives, rather than “paths”, these are point, line segment, triangle, tetrahedron, and so on.</p>
<p>Currently <code>PATH()</code> and <code>PRIMITIVE</code> are the highest level functions to decompose simple features objects.</p>
<p>There are decomposition functions for lower-level <code>sf</code> objects organized as <code>sc_path</code>, <code>sc_coord</code>, and <code>sc_object</code>. <code>sc_path</code> does all the work, building a simple map of all the parts and the vertex count. This is used to classify the vertex table when it is extracted, which makes the unique-id management for path-vertex normalization much simpler than it was in <code>gris</code> or <code>rangl</code>.</p>
<p><strong>NOTE:</strong> earlier versions of this used the concept of “branch” rather than path, so there is some ongoing migration of the use of these words. <em>Branch</em> is a more general concept than implemented in geo-spatial systems generally, and so <em>path</em> is more accurate We reserve branch for possible future models that are general. A “point PATH” has meaning in the sense of being a single-vertex “path”, and so a multipoint is a collection of these degenerate forms. “Path” as a concept is clearly rooted in optimization suited to planar forms, and so is more accurate than “branch”.</p>
<p>In our terminology a branch or path is the group between the raw geometry and the objects, and so applies to a connected polygon ring, closed or open linestring, a single coordinate with a multipoint (a path with one vertex). In this scheme a polygon ring and a closed linestring are exactly the same (since they actually are exactly the same) and there are no plane-filling branches, or indeed volume-filling branches. This is a clear limitation of the branch model and it matches that used by GIS.</p>
</div>
<div id="exceptions" class="section level2">
<h2 class="hasAnchor">
<a href="#exceptions" class="anchor"></a>Exceptions</h2>
<p>TopoJSON, Eonfusion, PostGIS, QGIS geometry generators, Fledermaus, …</p>
<p>The silicate family</p>
<p>scdb, scspatstat, sctrip, scrgl, scraster, scicosa, scgraph</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2 class="hasAnchor">
<a href="#sidebar" class="anchor"></a>License</h2>
<p><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Michael D. Sumner <br><small class="roles"> Author, maintainer </small> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/hypertidy/silicate"><img src="https://travis-ci.org/hypertidy/silicate.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/hypertidy/silicate"><img src="https://ci.appveyor.com/api/projects/status/github/hypertidy/silicate?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/github/hypertidy/silicate?branch=master"><img src="https://img.shields.io/codecov/c/github/hypertidy/silicate/master.svg" alt="Coverage Status"></a></li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Michael D. Sumner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
